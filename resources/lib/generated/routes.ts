// AUTO-GENERATED by litestar-vite. Do not edit.
/* eslint-disable */

// API base URL - only needed for separate dev servers
// Set VITE_API_URL=http://localhost:8000 when running Vite separately
const API_URL = (typeof import.meta !== 'undefined' && (import.meta as any).env?.VITE_API_URL) ?? '';

/** Semantic string aliases derived from OpenAPI `format`. */
/** RFC 3339 date-time string */
export type DateTime = string;

/** UUID v4 string */
export type UUID = string;


/** All available route names */
export type RouteName =
  | 'about'
  | 'account.remove'
  | 'dashboard'
  | 'favicon'
  | 'forgot-password'
  | 'forgot-password.send'
  | 'github.complete'
  | 'github.register'
  | 'google.complete'
  | 'google.register'
  | 'health_check'
  | 'home'
  | 'invitation.accept'
  | 'invitation.accept.page'
  | 'invitation.decline'
  | 'invitations.list'
  | 'landing'
  | 'login'
  | 'login.check'
  | 'logout'
  | 'mfa-challenge'
  | 'mfa-challenge.verify'
  | 'mfa.confirm'
  | 'mfa.disable'
  | 'mfa.enable'
  | 'mfa.regenerate-codes'
  | 'openapi.json'
  | 'password.confirm'
  | 'password.confirm.page'
  | 'password.update'
  | 'privacy-policy'
  | 'profile.avatar.delete'
  | 'profile.avatar.upload'
  | 'profile.show'
  | 'profile.update'
  | 'register'
  | 'register.add'
  | 'reset-password'
  | 'reset-password.update'
  | 'tags:create'
  | 'tags:delete'
  | 'tags:get'
  | 'tags:list'
  | 'tags:update'
  | 'teams.add'
  | 'teams.create'
  | 'teams.edit'
  | 'teams.invitation.cancel'
  | 'teams.invitations'
  | 'teams.invite'
  | 'teams.list'
  | 'teams.remove'
  | 'teams.settings'
  | 'teams.show'
  | 'teams:add-member'
  | 'teams:remove-member'
  | 'terms-of-service'
  | 'uploads'
  | 'users:assign-role'
  | 'users:create'
  | 'users:delete'
  | 'users:get'
  | 'users:list'
  | 'users:revoke-role'
  | 'users:update'
  | 'verification.send'
  | 'verify-email'
  | 'vite';

/** Path parameter definitions per route */
export interface RoutePathParams {
  'about': Record<string, never>;
  'account.remove': Record<string, never>;
  'dashboard': Record<string, never>;
  'favicon': Record<string, never>;
  'forgot-password': Record<string, never>;
  'forgot-password.send': Record<string, never>;
  'github.complete': Record<string, never>;
  'github.register': Record<string, never>;
  'google.complete': Record<string, never>;
  'google.register': Record<string, never>;
  'health_check': Record<string, never>;
  'home': Record<string, never>;
  'invitation.accept': {
    token: string;
  };
  'invitation.accept.page': {
    token: string;
  };
  'invitation.decline': {
    token: string;
  };
  'invitations.list': Record<string, never>;
  'landing': Record<string, never>;
  'login': Record<string, never>;
  'login.check': Record<string, never>;
  'logout': Record<string, never>;
  'mfa-challenge': Record<string, never>;
  'mfa-challenge.verify': Record<string, never>;
  'mfa.confirm': Record<string, never>;
  'mfa.disable': Record<string, never>;
  'mfa.enable': Record<string, never>;
  'mfa.regenerate-codes': Record<string, never>;
  'openapi.json': Record<string, never>;
  'password.confirm': Record<string, never>;
  'password.confirm.page': Record<string, never>;
  'password.update': Record<string, never>;
  'privacy-policy': Record<string, never>;
  'profile.avatar.delete': Record<string, never>;
  'profile.avatar.upload': Record<string, never>;
  'profile.show': Record<string, never>;
  'profile.update': Record<string, never>;
  'register': Record<string, never>;
  'register.add': Record<string, never>;
  'reset-password': Record<string, never>;
  'reset-password.update': Record<string, never>;
  'tags:create': Record<string, never>;
  'tags:delete': {
    tag_id: UUID;
  };
  'tags:get': {
    tag_id: UUID;
  };
  'tags:list': Record<string, never>;
  'tags:update': {
    tag_id: UUID;
  };
  'teams.add': Record<string, never>;
  'teams.create': Record<string, never>;
  'teams.edit': {
    team_slug: string;
  };
  'teams.invitation.cancel': {
    invitation_id: UUID;
    team_slug: string;
  };
  'teams.invitations': {
    team_slug: string;
  };
  'teams.invite': {
    team_slug: string;
  };
  'teams.list': Record<string, never>;
  'teams.remove': {
    team_slug: string;
  };
  'teams.settings': {
    team_slug: string;
  };
  'teams.show': {
    team_slug: string;
  };
  'teams:add-member': {
    team_slug: string;
  };
  'teams:remove-member': {
    team_slug: string;
  };
  'terms-of-service': Record<string, never>;
  'uploads': {
    file_path: any;
  };
  'users:assign-role': {
    role_slug: string;
  };
  'users:create': Record<string, never>;
  'users:delete': {
    user_id: UUID;
  };
  'users:get': {
    user_id: UUID;
  };
  'users:list': Record<string, never>;
  'users:revoke-role': {
    role_slug: string;
  };
  'users:update': {
    user_id: UUID;
  };
  'verification.send': Record<string, never>;
  'verify-email': Record<string, never>;
  'vite': {
    file_path: any;
  };
}

/** Query parameter definitions per route */
export interface RouteQueryParams {
  'about': Record<string, never>;
  'account.remove': Record<string, never>;
  'dashboard': Record<string, never>;
  'favicon': Record<string, never>;
  'forgot-password': Record<string, never>;
  'forgot-password.send': Record<string, never>;
  'github.complete': {
    code?: string;
    code_verifier?: string;
    error?: string;
    state?: string;
  };
  'github.register': Record<string, never>;
  'google.complete': {
    code?: string;
    code_verifier?: string;
    error?: string;
    state?: string;
  };
  'google.register': Record<string, never>;
  'health_check': Record<string, never>;
  'home': Record<string, never>;
  'invitation.accept': Record<string, never>;
  'invitation.accept.page': Record<string, never>;
  'invitation.decline': Record<string, never>;
  'invitations.list': Record<string, never>;
  'landing': Record<string, never>;
  'login': Record<string, never>;
  'login.check': Record<string, never>;
  'logout': Record<string, never>;
  'mfa-challenge': Record<string, never>;
  'mfa-challenge.verify': Record<string, never>;
  'mfa.confirm': Record<string, never>;
  'mfa.disable': Record<string, never>;
  'mfa.enable': Record<string, never>;
  'mfa.regenerate-codes': Record<string, never>;
  'openapi.json': Record<string, never>;
  'password.confirm': Record<string, never>;
  'password.confirm.page': Record<string, never>;
  'password.update': Record<string, never>;
  'privacy-policy': Record<string, never>;
  'profile.avatar.delete': Record<string, never>;
  'profile.avatar.upload': Record<string, never>;
  'profile.show': Record<string, never>;
  'profile.update': Record<string, never>;
  'register': Record<string, never>;
  'register.add': Record<string, never>;
  'reset-password': {
    email?: string;
    token?: string;
  };
  'reset-password.update': Record<string, never>;
  'tags:create': Record<string, never>;
  'tags:delete': Record<string, never>;
  'tags:get': Record<string, never>;
  'tags:list': {
    createdAfter?: DateTime;
    createdBefore?: DateTime;
    currentPage?: number;
    ids?: string[];
    orderBy?: string;
    pageSize?: number;
    searchIgnoreCase?: boolean;
    searchString?: string;
    sortOrder?: "asc" | "desc";
    updatedAfter?: DateTime;
    updatedBefore?: DateTime;
  };
  'tags:update': Record<string, never>;
  'teams.add': Record<string, never>;
  'teams.create': Record<string, never>;
  'teams.edit': Record<string, never>;
  'teams.invitation.cancel': Record<string, never>;
  'teams.invitations': Record<string, never>;
  'teams.invite': Record<string, never>;
  'teams.list': {
    createdAfter?: DateTime;
    createdBefore?: DateTime;
    currentPage?: number;
    ids?: string[];
    orderBy?: string;
    pageSize?: number;
    searchIgnoreCase?: boolean;
    searchString?: string;
    sortOrder?: "asc" | "desc";
    updatedAfter?: DateTime;
    updatedBefore?: DateTime;
  };
  'teams.remove': Record<string, never>;
  'teams.settings': Record<string, never>;
  'teams.show': Record<string, never>;
  'teams:add-member': Record<string, never>;
  'teams:remove-member': Record<string, never>;
  'terms-of-service': Record<string, never>;
  'uploads': Record<string, never>;
  'users:assign-role': Record<string, never>;
  'users:create': Record<string, never>;
  'users:delete': Record<string, never>;
  'users:get': Record<string, never>;
  'users:list': {
    createdAfter?: DateTime;
    createdBefore?: DateTime;
    currentPage?: number;
    ids?: string[];
    orderBy?: string;
    pageSize?: number;
    searchIgnoreCase?: boolean;
    searchString?: string;
    sortOrder?: "asc" | "desc";
    updatedAfter?: DateTime;
    updatedBefore?: DateTime;
  };
  'users:revoke-role': Record<string, never>;
  'users:update': Record<string, never>;
  'verification.send': Record<string, never>;
  'verify-email': {
    token?: string;
  };
  'vite': Record<string, never>;
}

type EmptyParams = Record<string, never>
type MergeParams<A, B> =
  A extends EmptyParams ? (B extends EmptyParams ? EmptyParams : B) : B extends EmptyParams ? A : A & B

/** Combined parameters (path + query) */
export type RouteParams<T extends RouteName> = MergeParams<RoutePathParams[T], RouteQueryParams[T]>

/** Route metadata */
export const routeDefinitions = {
  'about': {
    path: '/about',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'about',
  },
  'account.remove': {
    path: '/profile',
    methods: ['DELETE'] as const,
    method: 'delete',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'dashboard': {
    path: '/dashboard',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'dashboard',
  },
  'favicon': {
    path: '/favicon.ico',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'forgot-password': {
    path: '/forgot-password',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/forgot-password',
  },
  'forgot-password.send': {
    path: '/forgot-password',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/forgot-password',
  },
  'github.complete': {
    path: '/o/github/complete',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: ['code', 'code_verifier', 'error', 'state'] as const,
  },
  'github.register': {
    path: '/register/github',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'google.complete': {
    path: '/o/google/complete',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: ['code', 'code_verifier', 'error', 'state'] as const,
  },
  'google.register': {
    path: '/register/google',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'health_check': {
    path: '/health',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'home': {
    path: '/',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'invitation.accept': {
    path: '/invitations/{token}/accept',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: ['token'] as const,
    queryParams: [] as const,
  },
  'invitation.accept.page': {
    path: '/invitations/{token}',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['token'] as const,
    queryParams: [] as const,
    component: 'invitation/accept',
  },
  'invitation.decline': {
    path: '/invitations/{token}/decline',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: ['token'] as const,
    queryParams: [] as const,
  },
  'invitations.list': {
    path: '/invitations',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'invitation/list',
  },
  'landing': {
    path: '/landing',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'landing',
  },
  'login': {
    path: '/login',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/login',
  },
  'login.check': {
    path: '/login',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/login',
  },
  'logout': {
    path: '/logout',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'mfa-challenge': {
    path: '/mfa-challenge',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/mfa-challenge',
  },
  'mfa-challenge.verify': {
    path: '/mfa-challenge',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/mfa-challenge',
  },
  'mfa.confirm': {
    path: '/mfa/confirm',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'mfa.disable': {
    path: '/mfa/disable',
    methods: ['DELETE'] as const,
    method: 'delete',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'mfa.enable': {
    path: '/mfa/enable',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'mfa.regenerate-codes': {
    path: '/mfa/regenerate-codes',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'openapi.json': {
    path: '/schema/openapi.json',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'password.confirm': {
    path: '/confirm-password',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/confirm-password',
  },
  'password.confirm.page': {
    path: '/confirm-password',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/confirm-password',
  },
  'password.update': {
    path: '/profile/password-update',
    methods: ['PATCH'] as const,
    method: 'patch',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'profile/edit',
  },
  'privacy-policy': {
    path: '/privacy-policy',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'legal/privacy-policy',
  },
  'profile.avatar.delete': {
    path: '/profile/avatar',
    methods: ['DELETE'] as const,
    method: 'delete',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'profile.avatar.upload': {
    path: '/profile/avatar',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'profile.show': {
    path: '/profile',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'profile/edit',
  },
  'profile.update': {
    path: '/profile',
    methods: ['PATCH'] as const,
    method: 'patch',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'profile/edit',
  },
  'register': {
    path: '/register',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/register',
  },
  'register.add': {
    path: '/register',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/register',
  },
  'reset-password': {
    path: '/reset-password',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: ['email', 'token'] as const,
    component: 'auth/reset-password',
  },
  'reset-password.update': {
    path: '/reset-password',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/reset-password',
  },
  'tags:create': {
    path: '/api/tags',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'tags:delete': {
    path: '/api/tags/{tag_id}',
    methods: ['DELETE'] as const,
    method: 'delete',
    pathParams: ['tag_id'] as const,
    queryParams: [] as const,
  },
  'tags:get': {
    path: '/api/tags/{tag_id}',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['tag_id'] as const,
    queryParams: [] as const,
  },
  'tags:list': {
    path: '/api/tags',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: ['createdAfter', 'createdBefore', 'currentPage', 'ids', 'orderBy', 'pageSize', 'searchIgnoreCase', 'searchString', 'sortOrder', 'updatedAfter', 'updatedBefore'] as const,
  },
  'tags:update': {
    path: '/api/tags/{tag_id}',
    methods: ['PATCH'] as const,
    method: 'patch',
    pathParams: ['tag_id'] as const,
    queryParams: [] as const,
  },
  'teams.add': {
    path: '/teams',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'teams.create': {
    path: '/teams/create',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'team/create',
  },
  'teams.edit': {
    path: '/teams/{team_slug}',
    methods: ['PATCH'] as const,
    method: 'patch',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
    component: 'team/edit',
  },
  'teams.invitation.cancel': {
    path: '/teams/{team_slug}/invitations/{invitation_id}',
    methods: ['DELETE'] as const,
    method: 'delete',
    pathParams: ['invitation_id', 'team_slug'] as const,
    queryParams: [] as const,
  },
  'teams.invitations': {
    path: '/teams/{team_slug}/invitations',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
    component: 'team/invitations',
  },
  'teams.invite': {
    path: '/teams/{team_slug}/invitations',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
  },
  'teams.list': {
    path: '/teams',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: ['createdAfter', 'createdBefore', 'currentPage', 'ids', 'orderBy', 'pageSize', 'searchIgnoreCase', 'searchString', 'sortOrder', 'updatedAfter', 'updatedBefore'] as const,
    component: 'team/list',
  },
  'teams.remove': {
    path: '/teams/{team_slug}',
    methods: ['DELETE'] as const,
    method: 'delete',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
  },
  'teams.settings': {
    path: '/teams/{team_slug}/settings',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
    component: 'team/settings',
  },
  'teams.show': {
    path: '/teams/{team_slug}',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
    component: 'team/show',
  },
  'teams:add-member': {
    path: '/api/teams/{team_slug}/members/add',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
  },
  'teams:remove-member': {
    path: '/api/teams/{team_slug}/members/remove',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: ['team_slug'] as const,
    queryParams: [] as const,
  },
  'terms-of-service': {
    path: '/terms-of-service',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'legal/terms-of-service',
  },
  'uploads': {
    path: '/uploads/{file_path}',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['file_path'] as const,
    queryParams: [] as const,
  },
  'users:assign-role': {
    path: '/api/roles/{role_slug}/assign',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: ['role_slug'] as const,
    queryParams: [] as const,
  },
  'users:create': {
    path: '/api/users',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
  },
  'users:delete': {
    path: '/api/users/{user_id}',
    methods: ['DELETE'] as const,
    method: 'delete',
    pathParams: ['user_id'] as const,
    queryParams: [] as const,
  },
  'users:get': {
    path: '/api/users/{user_id}',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['user_id'] as const,
    queryParams: [] as const,
  },
  'users:list': {
    path: '/api/users',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: ['createdAfter', 'createdBefore', 'currentPage', 'ids', 'orderBy', 'pageSize', 'searchIgnoreCase', 'searchString', 'sortOrder', 'updatedAfter', 'updatedBefore'] as const,
  },
  'users:revoke-role': {
    path: '/api/roles/{role_slug}/revoke',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: ['role_slug'] as const,
    queryParams: [] as const,
  },
  'users:update': {
    path: '/api/users/{user_id}',
    methods: ['PATCH'] as const,
    method: 'patch',
    pathParams: ['user_id'] as const,
    queryParams: [] as const,
  },
  'verification.send': {
    path: '/verify-email/send',
    methods: ['POST'] as const,
    method: 'post',
    pathParams: [] as const,
    queryParams: [] as const,
    component: 'auth/verify-email',
  },
  'verify-email': {
    path: '/verify-email',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: [] as const,
    queryParams: ['token'] as const,
    component: 'auth/verify-email',
  },
  'vite': {
    path: '/static/{file_path}',
    methods: ['GET'] as const,
    method: 'get',
    pathParams: ['file_path'] as const,
    queryParams: [] as const,
  },
} as const

/** Check if path params are required for a route */
type HasRequiredPathParams<T extends RouteName> =
  RoutePathParams[T] extends Record<string, never> ? false : true;

/** Check if query params have any required fields */
type HasRequiredQueryParams<T extends RouteName> =
  RouteQueryParams[T] extends Record<string, never>
    ? false
    : Partial<RouteQueryParams[T]> extends RouteQueryParams[T]
      ? false
      : true;

/** Routes that require parameters (path or query) */
type RoutesWithRequiredParams = {
  [K in RouteName]: HasRequiredPathParams<K> extends true
    ? K
    : HasRequiredQueryParams<K> extends true
      ? K
      : never;
}[RouteName];

/** Routes without any required parameters */
type RoutesWithoutRequiredParams = Exclude<RouteName, RoutesWithRequiredParams>;

/**
 * Generate a URL for a named route.
 *
 * @example
 * route('books')                              // '/api/books'
 * route('book_detail', { book_id: 123 })      // '/api/books/123'
 * route('search', { q: 'test', limit: 5 })    // '/api/search?q=test&limit=5'
 *
 * // Access HTTP method from route definition when needed:
 * routeDefinitions.login.method               // 'post'
 */
export function route<T extends RoutesWithoutRequiredParams>(name: T): string;
export function route<T extends RoutesWithoutRequiredParams>(
  name: T,
  params?: RouteParams<T>,
): string;
export function route<T extends RoutesWithRequiredParams>(
  name: T,
  params: RouteParams<T>,
): string;
export function route<T extends RouteName>(
  name: T,
  params?: RouteParams<T>,
): string {
  const def = routeDefinitions[name];
  let url: string = def.path;

  // Replace path parameters (use replaceAll to handle multiple occurrences)
  if (params) {
    for (const param of def.pathParams) {
      const value = (params as Record<string, unknown>)[param];
      if (value !== undefined) {
        url = url.replaceAll("{" + param + "}", String(value));
      }
    }
  }

  // Add query parameters
  if (params) {
    const queryParts: string[] = [];
    for (const param of def.queryParams) {
      const value = (params as Record<string, unknown>)[param];
      if (value !== undefined) {
        queryParts.push(encodeURIComponent(param) + "=" + encodeURIComponent(String(value)));
      }
    }
    if (queryParts.length > 0) {
      url += "?" + queryParts.join("&");
    }
  }

  // Apply API URL if set (for separate dev servers)
  return API_URL ? API_URL.replace(/\/$/, '') + url : url;
}

/** Check if a route exists */
export function hasRoute(name: string): name is RouteName {
  return name in routeDefinitions;
}

/** Get all route names */
export function getRouteNames(): RouteName[] {
  return Object.keys(routeDefinitions) as RouteName[];
}

/** Get route metadata */
export function getRoute<T extends RouteName>(name: T): (typeof routeDefinitions)[T] {
  return routeDefinitions[name];
}

// ============================================================================
// Route Matching Helpers
// ============================================================================

/** Cache for compiled route patterns */
const patternCache = new Map<string, RegExp>();

/**
 * Compile a route path pattern to a regex for URL matching.
 * Results are cached for performance.
 */
function compilePattern(path: string): RegExp {
  const cached = patternCache.get(path);
  if (cached) return cached;

  // Escape special regex characters except { }
  let pattern = path.replace(/[.*+?^$|()\[\]]/g, '\\$&');
  // Replace {param} or {param:type} with matchers
  pattern = pattern.replace(/\{([^}]+)\}/g, (_match, paramSpec: string) => {
    const paramType = paramSpec.includes(':') ? paramSpec.split(':')[1] : 'str';
    switch (paramType) {
      case 'uuid':
        return '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}';
      case 'path':
        return '.*';
      case 'int':
        return '\\d+';
      default:
        return '[^/]+';
    }
  });
  const regex = new RegExp(`^${pattern}$`, 'i');
  patternCache.set(path, regex);
  return regex;
}

/**
 * Convert a URL to its corresponding route name.
 *
 * @param url - URL or path to match (query strings and hashes are stripped)
 * @returns The matching route name, or null if no match found
 *
 * @example
 * toRoute('/api/books')        // 'books'
 * toRoute('/api/books/123')    // 'book_detail'
 * toRoute('/unknown')          // null
 */
export function toRoute(url: string): RouteName | null {
  // Strip query string and hash
  const path = url.split('?')[0].split('#')[0];
  // Normalize: remove trailing slash except for root
  const normalized = path === '/' ? path : path.replace(/\/$/, '');

  for (const [name, def] of Object.entries(routeDefinitions)) {
    if (compilePattern(def.path).test(normalized)) {
      return name as RouteName;
    }
  }
  return null;
}

/**
 * Get the current route name based on the browser URL.
 * Returns null in SSR/non-browser environments.
 *
 * @returns Current route name, or null if no match or not in browser
 *
 * @example
 * // On page /api/books/123
 * currentRoute()  // 'book_detail'
 */
export function currentRoute(): RouteName | null {
  if (typeof window === 'undefined') return null;
  return toRoute(window.location.pathname);
}

/**
 * Check if a URL matches a route name or pattern.
 * Supports wildcard patterns with `*` to match multiple routes.
 *
 * @param url - URL or path to check
 * @param pattern - Route name or pattern (e.g., 'books', 'book_*', '*_detail')
 * @returns True if the URL matches the route pattern
 *
 * @example
 * isRoute('/api/books', 'books')           // true
 * isRoute('/api/books/123', 'book_*')      // true (wildcard)
 */
export function isRoute(url: string, pattern: string): boolean {
  const routeName = toRoute(url);
  if (!routeName) return false;
  // Escape special regex chars (except *), then convert * to .*
  const escaped = pattern.replace(/[.+?^$|()\[\]{}]/g, '\\$&');
  const regex = new RegExp(`^${escaped.replace(/\*/g, '.*')}$`);
  return regex.test(routeName);
}

/**
 * Check if the current browser URL matches a route name or pattern.
 * Supports wildcard patterns with `*` to match multiple routes.
 * Returns false in SSR/non-browser environments.
 *
 * @param pattern - Route name or pattern (e.g., 'books', 'book_*', '*_page')
 * @returns True if current URL matches the route pattern
 *
 * @example
 * // On page /books
 * isCurrentRoute('books_page')  // true
 * isCurrentRoute('*_page')      // true (wildcard)
 */
export function isCurrentRoute(pattern: string): boolean {
  const current = currentRoute();
  if (!current) return false;
  // Escape special regex chars (except *), then convert * to .*
  const escaped = pattern.replace(/[.+?^$|()\[\]{}]/g, '\\$&');
  const regex = new RegExp(`^${escaped.replace(/\*/g, '.*')}$`);
  return regex.test(current);
}
